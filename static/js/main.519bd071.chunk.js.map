{"version":3,"sources":["services/apiService.js","components/SearchBar/SearchForm.jsx","components/SearchBar/SearchBar.jsx","components/ImageGallery/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/Notification/Notification.jsx","components/App.js","index.js"],"names":["searchQuery","page","axios","get","then","response","data","hits","SearchForm","state","handleChange","e","preventDefault","setState","target","name","value","handleSubmit","props","updateQuery","className","onSubmit","this","type","onChange","autoComplete","autoFocus","placeholder","Component","SearchBar","ImageGalleryItem","picture","data-src","largeImageURL","src","webformatURL","alt","id","ImageGallery","pictures","getBigPicture","map","onClick","key","Button","title","handler","Modal","backdropRef","createRef","handleKeypress","code","closeModal","handleBackdropClick","current","window","addEventListener","removeEventListener","bigPicture","ref","Notification","message","App","query","isEmpty","isLoading","isModal","error","updateState","resetBeforeNewQuery","loadMorePictures","scrollToTarget","document","getElementById","getBoundingClientRect","top","scrollY","scrollTo","behavior","dataset","openModal","prevProps","prevState","apiService","concat","length","catch","finally","color","height","width","ReactDOM","render","StrictMode"],"mappings":"4SAYe,EAVgB,SAACA,EAAaC,GAG3C,OAAOC,IACJC,IADI,2FAFK,qCAEL,cAE6FH,EAF7F,iBAEiHC,IAErHG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,KAAKC,SCqCrBC,E,4MAtCbC,MAAQ,CACNT,YAAa,I,EAGfU,aAAe,SAAAC,GACbA,EAAEC,iBAEF,EAAKC,SAAL,eACGF,EAAEG,OAAOC,KAAOJ,EAAEG,OAAOE,S,EAI9BC,aAAe,SAAAN,GACbA,EAAEC,iBAEF,EAAKM,MAAMC,YAAY,EAAKV,MAAMT,c,uDAIlC,OACE,0BAAMoB,UAAU,cAAcC,SAAUC,KAAKL,cAC3C,4BAAQM,KAAK,SAASH,UAAU,uBAC9B,0BAAMA,UAAU,6BAAhB,mCAEF,2BACEI,SAAUF,KAAKZ,aACfK,KAAK,cACLK,UAAU,qBACVG,KAAK,OACLE,aAAa,MACbC,WAAS,EACTC,YAAY,4J,GApCGC,aCWVC,EAVG,SAAC,GAAD,IAAGV,EAAH,EAAGA,YAAH,OAChB,4BAAQC,UAAU,cAChB,kBAAC,EAAD,CAAYD,YAAaA,MCWdW,EAdU,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAH,OACvB,oCACE,yBAAKC,WAAUD,EAAQE,cAAeC,IAAKH,EAAQI,aAAcC,IAAKL,EAAQM,GAAIjB,UAAU,yBCcjFkB,EAfM,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAUC,EAAb,EAAaA,cAAb,OACnB,wBAAIpB,UAAU,iBACXmB,EAASE,KAAI,SAAAV,GAAO,OACnB,wBAAIX,UAAU,sBAAsBsB,QAASF,EAAeH,GAAIN,EAAQM,GAAIM,IAAKZ,EAAQM,IACvF,kBAAC,EAAD,CAAkBN,QAASA,UCSpBa,EAdA,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAO5C,EAAV,EAAUA,KAAM6C,EAAhB,EAAgBA,QAAhB,OACb,yBAAK1B,UAAU,eACb,4BAAQG,KAAK,SAASH,UAAU,mBAAmBsB,QAAS,kBAAMI,EAAQ7C,KACvE4C,KC0CQE,E,4MAvCbC,YAAcC,sB,EAUdC,eAAiB,SAAAvC,GACA,WAAXA,EAAEwC,MAEN,EAAKjC,MAAMkC,c,EAGbC,oBAAsB,SAAA1C,GAAM,IAClB2C,EAAY,EAAKN,YAAjBM,QAEJA,GAAW3C,EAAEG,SAAWwC,GAI5B,EAAKpC,MAAMkC,c,kEApBXG,OAAOC,iBAAiB,UAAWlC,KAAK4B,kB,6CAIxCK,OAAOE,oBAAoB,UAAWnC,KAAK4B,kB,+BAmBnC,IACAQ,EAAepC,KAAKJ,MAApBwC,WAER,OACE,yBAAKtC,UAAU,UAAUuC,IAAKrC,KAAK0B,YAAaN,QAASpB,KAAK+B,qBAC5D,yBAAKjC,UAAU,SACb,yBAAKA,UAAU,aAAac,IAAKwB,EAAYtB,IAAI,qB,GAtCvCR,aCULgC,EAVM,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAH,OACnB,yBAAKzC,UAAU,gBACb,0BAAMA,UAAU,yBAAyByC,KCqG9BC,E,4MA/FbrD,MAAQ,CACN8B,SAAU,GACVmB,WAAY,GACZK,MAAO,GACP9D,KAAM,EACN+D,SAAS,EACTC,WAAW,EACXC,SAAS,EACTC,MAAO,M,EA2BTC,YAAc,SAAC3D,EAAOO,GACpB,EAAKH,SAAL,eACGJ,EAAQO,K,EAIbG,YAAc,SAAAH,GACZA,IAAU,EAAKP,MAAMsD,OAAS,EAAKM,sBACnC,EAAKD,YAAY,QAASpD,I,EAG5BsD,iBAAmB,SAAAtD,GACjBA,IACA,EAAKoD,YAAY,OAAQpD,I,EAG3BqD,oBAAsB,WACpB,EAAKD,YAAY,OAAQ,GACzB,EAAKA,YAAY,WAAY,K,EAG/BG,eAAiB,SAAAlC,GACf,IAAMvB,EAAS0D,SAASC,eAAepC,GAAIqC,wBAAwBC,IAAMpB,OAAOqB,QAAU,GAE1FrB,OAAOsB,SAAS,CACdF,IAAK7D,EACLgE,SAAU,Y,EAIdtC,cAAgB,SAAA7B,GACd,EAAKyD,YAAY,aAAczD,EAAEG,OAAOiE,QAAQ7C,KAChD,EAAK8C,a,EAGPA,UAAY,WACV,EAAKZ,YAAY,WAAW,I,EAG9BhB,WAAa,WACX,EAAKgB,YAAY,WAAW,GAC5B,EAAKA,YAAY,aAAc,K,iEAjEda,EAAWC,GAAY,IAAD,SACf5D,KAAKb,MAArBsD,EAD+B,EAC/BA,MAAO9D,EADwB,EACxBA,KAEXiF,EAAUnB,QAAUA,GAASmB,EAAUjF,OAASA,IAClDqB,KAAKT,SAAS,CACZoD,WAAW,EACXD,SAAS,EACTG,MAAO,OAGTgB,EAC0BpB,EAAO9D,GAC9BG,MAAK,SAAA2B,GACJ,EAAKlB,UAAS,SAAAJ,GAAK,MAAK,CACtB8B,SAAU9B,EAAM8B,SAAS6C,OAAOrD,QAEjCA,EAAQsD,QAAU,EAAKjB,YAAL,WAA4B,GAC/CrC,EAAQsD,QAAU,EAAKd,eAAexC,EAAQ,GAAGM,OAElDiD,OAAM,SAAAnB,GAAK,OAAI,EAAKtD,SAAS,CAAEsD,aAC/BoB,SAAQ,kBAAM,EAAK1E,SAAS,CAAEoD,WAAW,U,+BAgDtC,IAAD,EACoE3C,KAAKb,MAAxE8B,EADD,EACCA,SAAUmB,EADX,EACWA,WAAYzD,EADvB,EACuBA,KAAMkE,EAD7B,EAC6BA,MAAOD,EADpC,EACoCA,QAASD,EAD7C,EAC6CA,UAAWD,EADxD,EACwDA,QAC/D,OACE,yBAAK5C,UAAU,kBACb,kBAAC,EAAD,CAAWD,YAAaG,KAAKH,cAC5BgD,GAAS,kBAAC,EAAD,CAAcN,QAAO,0GAA0BM,EAAMN,WAC9DG,GAAW,kBAAC,EAAD,CAAcH,QAAQ,4JACjCtB,EAAS8C,OAAS,GAAK,kBAAC,EAAD,CAAc9C,SAAUA,EAAUC,cAAelB,KAAKkB,gBAC7EyB,GAAa,kBAAC,IAAD,CAAQ7C,UAAU,SAASG,KAAK,YAAYiE,MAAM,UAAUC,OAAQ,GAAIC,MAAO,KAC5FnD,EAAS8C,QAAU,IAAM,kBAAC,EAAD,CAAQxC,MAAM,uCAAS5C,KAAMA,EAAM6C,QAASxB,KAAKgD,mBAC1EJ,GAAW,kBAAC,EAAD,CAAOR,WAAYA,EAAYN,WAAY9B,KAAK8B,kB,GA1FlDxB,a,eCLlB+D,EAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFrB,SAASC,eAAe,W","file":"static/js/main.519bd071.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst fetchPicturesWithQuery = (searchQuery, page) => {\n  const apiKey = `15321800-0af55316b9677918b25647eb1`;\n\n  return axios\n    .get(\n      `https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=12&key=${apiKey}&q=${searchQuery}&page=${page}`,\n    )\n    .then(response => response.data.hits);\n};\n\nexport default {\n  fetchPicturesWithQuery,\n};\n","import React, { Component } from 'react';\nimport T from 'prop-types';\n\nclass SearchForm extends Component {\n  static propTypes = {\n    updateQuery: T.func.isRequired,\n  };\n\n  state = {\n    searchQuery: '',\n  };\n\n  handleChange = e => {\n    e.preventDefault();\n\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    this.props.updateQuery(this.state.searchQuery);\n  };\n\n  render() {\n    return (\n      <form className=\"search-form\" onSubmit={this.handleSubmit}>\n        <button type=\"submit\" className=\"search-form__button\">\n          <span className=\"search-form__button-label\">Поиск</span>\n        </button>\n        <input\n          onChange={this.handleChange}\n          name=\"searchQuery\"\n          className=\"search-form__input\"\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Введите то, что хотите найти...\"\n        />\n      </form>\n    );\n  }\n}\n\nexport default SearchForm;\n","import React from 'react';\nimport T from 'prop-types';\nimport SearchForm from './SearchForm';\n\nconst SearchBar = ({ updateQuery }) => (\n  <header className=\"search-bar\">\n    <SearchForm updateQuery={updateQuery} />\n  </header>\n);\n\nSearchBar.propTypes = {\n  updateQuery: T.func.isRequired,\n};\n\nexport default SearchBar;\n","import React from 'react';\nimport T from 'prop-types';\n\nconst ImageGalleryItem = ({ picture }) => (\n  <>\n    <img data-src={picture.largeImageURL} src={picture.webformatURL} alt={picture.id} className=\"image-gallery__img\" />\n  </>\n);\n\nImageGalleryItem.propTypes = {\n  picture: T.shape({\n    largeImageURL: T.string.isRequired,\n    webformatURL: T.string.isRequired,\n    id: T.number.isRequired,\n  }).isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport T from 'prop-types';\nimport ImageGalleryItem from './ImageGalleryItem';\n\nconst ImageGallery = ({ pictures, getBigPicture }) => (\n  <ul className=\"image-gallery\">\n    {pictures.map(picture => (\n      <li className=\"image-gallery__item\" onClick={getBigPicture} id={picture.id} key={picture.id}>\n        <ImageGalleryItem picture={picture} />\n      </li>\n    ))}\n  </ul>\n);\n\nImageGallery.propTypes = {\n  pictures: T.arrayOf(T.shape({ id: T.number.isRequired })).isRequired,\n  getBigPicture: T.func.isRequired,\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport T from 'prop-types';\n\nconst Button = ({ title, page, handler }) => (\n  <div className=\"button-wrap\">\n    <button type=\"button\" className=\"button-wrap__btn\" onClick={() => handler(page)}>\n      {title}\n    </button>\n  </div>\n);\n\nButton.propTypes = {\n  title: T.string.isRequired,\n  page: T.number.isRequired,\n  handler: T.func.isRequired,\n};\n\nexport default Button;\n","import React, { Component, createRef } from 'react';\nimport T from 'prop-types';\n\nclass Modal extends Component {\n  static propTypes = {\n    bigPicture: T.string.isRequired,\n    closeModal: T.func.isRequired,\n  };\n\n  backdropRef = createRef();\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeypress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeypress);\n  }\n\n  handleKeypress = e => {\n    if (e.code !== 'Escape') return;\n\n    this.props.closeModal();\n  };\n\n  handleBackdropClick = e => {\n    const { current } = this.backdropRef;\n\n    if (current && e.target !== current) {\n      return;\n    }\n\n    this.props.closeModal();\n  };\n\n  render() {\n    const { bigPicture } = this.props;\n\n    return (\n      <div className=\"overlay\" ref={this.backdropRef} onClick={this.handleBackdropClick}>\n        <div className=\"modal\">\n          <img className=\"modal__img\" src={bigPicture} alt=\"bigPicture\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import React from 'react';\nimport T from 'prop-types';\n\nconst Notification = ({ message }) => (\n  <div className=\"notification\">\n    <span className=\"notification__message\">{message}</span>\n  </div>\n);\n\nNotification.propTypes = {\n  message: T.string.isRequired,\n};\n\nexport default Notification;\n","import React, { Component } from 'react';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\nimport apiService from '../services/apiService';\nimport SearchBar from './SearchBar/SearchBar';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport Button from './Button/Button';\nimport Modal from './Modal/Modal';\nimport Notification from './Notification/Notification';\n\nclass App extends Component {\n  state = {\n    pictures: [],\n    bigPicture: '',\n    query: '',\n    page: 1,\n    isEmpty: false,\n    isLoading: false,\n    isModal: false,\n    error: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { query, page } = this.state;\n\n    if (prevState.query !== query || prevState.page !== page) {\n      this.setState({\n        isLoading: true,\n        isEmpty: false,\n        error: null,\n      });\n\n      apiService\n        .fetchPicturesWithQuery(query, page)\n        .then(picture => {\n          this.setState(state => ({\n            pictures: state.pictures.concat(picture),\n          }));\n          !picture.length && this.updateState(`isEmpty`, true);\n          picture.length && this.scrollToTarget(picture[0].id);\n        })\n        .catch(error => this.setState({ error }))\n        .finally(() => this.setState({ isLoading: false }));\n    }\n  }\n\n  updateState = (state, value) => {\n    this.setState({\n      [state]: value,\n    });\n  };\n\n  updateQuery = value => {\n    value !== this.state.query && this.resetBeforeNewQuery();\n    this.updateState('query', value);\n  };\n\n  loadMorePictures = value => {\n    value++;\n    this.updateState('page', value);\n  };\n\n  resetBeforeNewQuery = () => {\n    this.updateState('page', 1);\n    this.updateState('pictures', []);\n  };\n\n  scrollToTarget = id => {\n    const target = document.getElementById(id).getBoundingClientRect().top + window.scrollY - 80;\n\n    window.scrollTo({\n      top: target,\n      behavior: 'smooth',\n    });\n  };\n\n  getBigPicture = e => {\n    this.updateState('bigPicture', e.target.dataset.src);\n    this.openModal();\n  };\n\n  openModal = () => {\n    this.updateState('isModal', true);\n  };\n\n  closeModal = () => {\n    this.updateState('isModal', false);\n    this.updateState('bigPicture', '');\n  };\n\n  render() {\n    const { pictures, bigPicture, page, error, isModal, isLoading, isEmpty } = this.state;\n    return (\n      <div className=\"page-container\">\n        <SearchBar updateQuery={this.updateQuery} />\n        {error && <Notification message={`Что то пошло не так: ${error.message}`} />}\n        {isEmpty && <Notification message=\"По вашему запросу ничего нет :(\" />}\n        {pictures.length > 0 && <ImageGallery pictures={pictures} getBigPicture={this.getBigPicture} />}\n        {isLoading && <Loader className=\"loader\" type=\"ThreeDots\" color=\"#e4e4e4\" height={80} width={80} />}\n        {pictures.length >= 12 && <Button title=\"Больше\" page={page} handler={this.loadMorePictures} />}\n        {isModal && <Modal bigPicture={bigPicture} closeModal={this.closeModal} />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import './sass/index.sass';\nimport App from './components/App';\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}